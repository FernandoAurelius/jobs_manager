{% load custom_filters %}
{% load tz %}

<div class="job-events grid-section">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3 class="page-title m-0">Job History</h3>
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addJobEventModal">
            <i class="bi bi-plus-circle me-2"></i>Add Event
        </button>
    </div>
    
    <div class="events-container mb-3">
        {% if events %}
            {% for event in events %}
            <div class="activity-item fadeInUp" style="animation-delay: {{ forloop.counter0|multiply:0.1 }}s">
                <div class="activity-icon">
                    <i class="bi bi-calendar-event"></i>
                </div>
                <div class="activity-content">
                    <div>{{ event.description|linebreaksbr }}</div>
                    <div class="activity-time">
                        <span class="text-muted">{{ event.created_at|date:"j M Y, H:i" }}</span>
                        {% if event.created_by %}
                        <span class="text-muted">by {{ event.created_by }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="alert alert-info">
                <i class="bi bi-info-circle me-2"></i>No events have been added to this job yet.
            </div>
        {% endif %}
    </div>
</div>